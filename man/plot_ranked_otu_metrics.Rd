% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_ranked_otu_metrics.R
\name{plot_ranked_otu_metrics}
\alias{plot_ranked_otu_metrics}
\title{Ranked multi-metric panel plot for OTU (or family) features}
\usage{
plot_ranked_otu_metrics(
  data,
  col_otu = "OTU",
  col_weighted = "Weighted_score",
  col_mean = "Mean_abundance",
  col_prev = "Prevalence",
  col_padj = "padj",
  col_log2fc = "log2FoldChange",
  col_importance = "Importance",
  col_degree = "Degree",
  col_betweenness = "Betweenness",
  legend_title = "log2FC\\n(blue = negative, red = positive)",
  palette_low = "#2166AC",
  palette_mid = "white",
  palette_high = "#B2182B",
  metric_order = c("Weighted", "Mean_abundance", "Prevalence", "Significance", "log2FC",
    "Importance", "Degree", "Betweenness"),
  base_size = 11,
  left_right_widths = c(1, 6),
  show_value_labels = TRUE,
  min_p = 1e-300
)
}
\arguments{
\item{data}{A data.frame or tibble containing the required columns.}

\item{col_otu}{Name of the feature ID column. Default `"OTU"`.}

\item{col_weighted}{Name of the weighted score column. Default `"Weighted_score"`.}

\item{col_mean}{Name of the mean abundance column. Default `"Mean_abundance"`.}

\item{col_prev}{Name of the prevalence column. Default `"Prevalence"`.}

\item{col_padj}{Name of the adjusted p-value (FDR) column. Default `"padj"`.}

\item{col_log2fc}{Name of the log2 fold change column. Default `"log2FoldChange"`.}

\item{col_importance}{Name of the importance score column. Default `"Importance"`.}

\item{col_degree}{Name of the network degree column. Default `"Degree"`.}

\item{col_betweenness}{Name of the betweenness column. Default `"Betweenness"`.}

\item{legend_title}{Title for the fill legend. Default
`"log2FC\n(blue = negative, red = positive)"`.}

\item{palette_low, palette_mid, palette_high}{Colors for the diverging palette.
Defaults are `#2166AC`, `"white"`, `#B2182B`.}

\item{metric_order}{Character vector controlling the facet order on the right;
defaults to `c("Weighted","Mean_abundance","Prevalence","Significance",
"log2FC","Importance","Degree","Betweenness")`.}

\item{base_size}{Base text size for `theme_minimal()`. Default `11`.}

\item{left_right_widths}{Numeric vector of length 2 for patchwork widths.
Default `c(1, 6)`.}

\item{show_value_labels}{Logical; whether to print value labels on bars.
Default `TRUE`.}

\item{min_p}{Smallest p used when computing `-log10(padj)` to avoid Inf.
Default `1e-300`.}
}
\value{
A list with elements:
  \item{plot}{A patchwork object ready to print.}
  \item{df_ordered}{The ordered data.frame used for plotting (left panel order).}
  \item{df_long}{The long-format data used for plotting.}
}
\description{
Create a two-part panel plot that ranks features by sign (non-negative
first) and weighted score, shows the primary *Weighted* column on the left
(with value labels and OTU names), and displays additional metrics as
column facets on the right. Fill colors map to `log2FoldChange` with a
diverging palette centered at 0.
}
\examples{
\dontrun{
p_out <- plot_ranked_otu_metrics(df_top)
p_out$plot
}
}
